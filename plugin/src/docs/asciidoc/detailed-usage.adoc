
== Detailed Usage
include::{docdir}/detailed-usage/applying.adoc[]
include::{docdir}/detailed-usage/sources.adoc[]
include::{docdir}/detailed-usage/naming.adoc[]
include::{docdir}/detailed-usage/overrides.adoc[]
include::{docdir}/detailed-usage/filtering.adoc[]

.settings.gradle.kts
[%collapsible]
====
[source,kotlin,subs="attributes+"]
----
import dev.aga.gradle.versioncatalogs.Generator.generate
import dev.aga.gradle.versioncatalogs.GeneratorConfig

plugins {
  id("dev.aga.gradle.version-catalog-generator") version("{version}")
}

dependencyResolutionManagement {
  repositories {
    mavenCentral() // must include repositories here for dependency resolution to work from settings
  }
  versionCatalogs {
    generate("springLibs") { // the name of the generated catalog
      from {
        toml {
          libraryAlias = "spring-boot-dependencies" // required, alias of the library in the toml below
          file = file("gradle/libs.versions.toml") // optional, only required if not using this value
        }
      }
      // use this instead if you just want to use direct dependency notation
      from("org.springframework.boot:spring-boot-dependencies:3.1.2")
      // you can optionally change the library alias generation behavior
      // by providing your own algorithms below. check the javadoc for more
      // information
      libraryAliasGenerator = {groupId, artifactId ->
        val prefix = aliasPrefixGenerator(groupId, artifactId)
        val suffix = aliasSuffixGenerator(prefix, groupId, artifactId)
        GeneratorConfig.DEFAULT_ALIAS_GENERATOR(prefix,suffix)
      }
      // for example if you prefer no prefix and camelCase library names you can do:
      aliasPrefixGenerator = GeneratorConfig.NO_PREFIX

      // you can optionally change the version alias generation behavior by
      // providing your own algorithm below. check the javadoc for more
      // information
      versionNameGenerator = GeneratorConfig.DEFAULT_VERSION_NAME_GENERATOR

      // you can optionally override version properties from the BOM you are
      // generating a catalog for. for example, if spring-boot-dependencies
      // specifies jackson 2.15.3 but you want to use 2.16.1 instead, you can
      // override the version property in their BOM. You can also specify
      // a version ref to use. The version ref only works if you are sourcing
      // your BOM dependency from a TOML file, and the version reference must
      // exist in that same TOML file.
      propertyOverrides = mapOf(
        "jackson-bom.version" to "2.16.1", // optionally override some version properties using a literal value
        "mockito.version" to versionRef("mockito"), // or you can reference version aliases in the source toml
      )

      // you can optionally provide regex patterns to exclude dependencies
      // by their group or name
      excludeGroups = "some\\.group"
      excludeNames = ".*pattern"
      // optionally enable caching. this is disabled by default while we test the feature
      // out. see the below property for more details
      cacheEnabled = true
      // by default, if cachins is enabled we will store generated catalogs in build/version-catalogs,
      // relative to the directory in which the settings file is stored. customize that
      // directory by passing in a new value here. A relative directory will be resolved
      // relative to the settings file root. An absolute directory will be used as-is.
      // WARNING: When using a non-standard directory, be cognizant of when this file will
      // get cleaned up (or rather, when it will _not_ . If the directory you use is not
      // cleaned by the clean task, your catalogs will not get updated.
      cacheDirectory = file("build/some-folder")
    }
  }
}
----
====

.settings.gradle
[%collapsible]
====
[source,groovy,subs="attributes+"]
----
plugins {
  id('dev.aga.gradle.version-catalog-generator') version '{version}'
}

dependencyResolutionManagement {
  repositories {
    mavenCentral() // must include repositories here for dependency resolution to work from settings
  }
  versionCatalogs {
    generator.generate("jsonLibs") {
      it.from("com.fasterxml.jackson:jackson-bom:2.15.2")
      // you can optionally change the library alias generation behavior
      // by providing your own algorithms below. check the javadoc for more
      // information
      it.libraryAliasGenerator = { groupId, artifactId ->
          def prefix = aliasPrefixGenerator.invoke(groupId, artifactId)
          def suffix = aliasSuffixGenerator.invoke(prefix, groupId, artifactId)
          DEFAULT_ALIAS_GENERATOR.invoke(prefix,suffix)
      }
      // you can optionally change the version alias generation behavior by
      // providing your own algorithm below. check the javadoc for more
      // information
      it.versionNameGenerator = it.DEFAULT_VERSION_NAME_GENERATOR

      // you can optionally provide regex patterns to exclude dependencies
      // by their group or name
      excludeGroups = "some\\.group"
      excludeNames = ".*pattern"
    }
  }
}
----
====

.build.gradle.kts
[%collapsible]
====
[source,kotlin]
----
// add your dependencies from the generated catalog
dependencies {
  implementation(springLibs.spring.springBootStarterJdbc)
}
----
====
